<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Generador de Notificaciones</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Tailwind (si ya lo tienes puedes quitarlo) -->
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<!-- Selector de idioma -->
<div class="fixed top-3 right-5 z-50">
  <select id="langSelector" class="border px-2 py-1 rounded bg-white shadow text-sm">
    <option value="es">Español</option>
    <option value="en">English</option>
  </select>
</div>

<div class="container mx-auto p-6 bg-white shadow rounded mt-6">

<h1 class="text-3xl font-bold mb-6 text-center">
  Generador de Notificaciones Interactivo
</h1>

<label>Título de la Notificación:</label>
<textarea id="tituloNotificacion" class="border w-full p-2 mb-4"></textarea>

<label>Tipo de Notificación:</label>
<select id="tipoNotificacion" class="border w-full p-2 mb-4">
  <option>Inicio de Afectación</option>
  <option>Actualización de Afectación</option>
  <option>Término de Afectación</option>
</select>

<label>Plataforma:</label>
<input id="plataforma" class="border w-full p-2 mb-4">

<label>¿En qué consiste?</label>
<textarea id="descripcion" class="border w-full p-2 mb-4"></textarea>

<label>Causa Raíz:</label>
<textarea id="causaRaiz" class="border w-full p-2 mb-4"></textarea>

<label>Servicios Afectados:</label>
<textarea id="serviciosAfectados" class="border w-full p-2 mb-4"></textarea>

<label>Países Afectados:</label>
<div id="paises" class="border p-2 mb-4">México, Argentina, Colombia...</div>

<div class="flex gap-2 flex-wrap mt-4">
  <button onclick="generarYMostrarResultado()" class="bg-blue-600 text-white px-4 py-2 rounded">
    Generar Notificación y Previsualizar
  </button>

  <button onclick="generarCorreo()" class="bg-green-600 text-white px-4 py-2 rounded">
    Genera Correo para Vo.Bo.
  </button>

  <button onclick="exportarImagen()" class="bg-purple-600 text-white px-4 py-2 rounded">
    Exportar como Imagen
  </button>

  <button onclick="exportarPDF()" class="bg-red-600 text-white px-4 py-2 rounded">
    Exportar como PDF
  </button>

  <button onclick="guardarTXT()" class="bg-gray-600 text-white px-4 py-2 rounded">
    Guardar como TXT
  </button>

  <button onclick="cargarTXT()" class="bg-gray-800 text-white px-4 py-2 rounded">
    Cargar desde TXT
  </button>
</div>

<hr class="my-6">

<h2 class="text-xl font-bold">Previsualización de Notificación</h2>
<div id="preview" class="border p-4 mt-3 bg-gray-50"></div>

</div>

<!-- ================================================= -->
<!-- TU JS ORIGINAL DEBE PERMANECER AQUÍ SIN MODIFICAR -->
<!-- ================================================= -->

<!-- ================== I18N MODULE ================== -->
<script>
const translations = {
  es: {
    "Generador de Notificaciones Interactivo": "Generador de Notificaciones Interactivo",
    "Título de la Notificación:": "Título de la Notificación:",
    "Tipo de Notificación:": "Tipo de Notificación:",
    "Plataforma:": "Plataforma:",
    "¿En qué consiste?": "¿En qué consiste?",
    "Causa Raíz:": "Causa Raíz:",
    "Servicios Afectados:": "Servicios Afectados:",
    "Países Afectados:": "Países Afectados:",
    "Generar Notificación y Previsualizar": "Generar Notificación y Previsualizar",
    "Genera Correo para Vo.Bo.": "Genera Correo para Vo.Bo.",
    "Exportar como Imagen": "Exportar como Imagen",
    "Exportar como PDF": "Exportar como PDF",
    "Guardar como TXT": "Guardar como TXT",
    "Cargar desde TXT": "Cargar desde TXT",
    "Previsualización de Notificación": "Previsualización de Notificación"
  },

  en: {
    "Generador de Notificaciones Interactivo": "Interactive Notification Generator",
    "Título de la Notificación:": "Notification Title:",
    "Tipo de Notificación:": "Notification Type:",
    "Plataforma:": "Platform:",
    "¿En qué consiste?": "Description:",
    "Causa Raíz:": "Root Cause:",
    "Servicios Afectados:": "Affected Services:",
    "Países Afectados:": "Affected Countries:",
    "Generar Notificación y Previsualizar": "Generate Notification and Preview",
    "Genera Correo para Vo.Bo.": "Generate Email for Approval",
    "Exportar como Imagen": "Export as Image",
    "Exportar como PDF": "Export as PDF",
    "Guardar como TXT": "Save as TXT",
    "Cargar desde TXT": "Load from TXT",
    "Previsualización de Notificación": "Notification Preview"
  }
};

function translatePage(lang) {
  localStorage.setItem("lang", lang);
  document.body.querySelectorAll("*").forEach(el => {
    if (el.childNodes.length === 1 && el.childNodes[0].nodeType === 3) {
      const text = el.innerText.trim();
      if (translations[lang][text]) {
        el.innerText = translations[lang][text];
      }
    }
  });
}

document.getElementById("langSelector").addEventListener("change", e => {
  translatePage(e.target.value);
});

const savedLang = localStorage.getItem("lang") || "es";
document.getElementById("langSelector").value = savedLang;
translatePage(savedLang);
</script>

</body>
</html>
